import{r as i,j as e}from"./react-2cd99521.js";import{u as L}from"./react-redux-5bfe471e.js";import{L as y}from"./index-f32d7dd4.js";import{Q as d,k as U}from"./react-toastify-9069338f.js";import{P as T}from"./Payment-fe94b2e1.js";import{d as _}from"./@metamask-d41600d6.js";import{W as G}from"./web3-abe3032c.js";import"./setimmediate-338d4348.js";import"./web3-eth-621954e4.js";import"./web3-types-ce0eb23a.js";import"./is-my-json-valid-2c93b9e3.js";import"./web3-validator-6b520267.js";import"./web3-errors-484f11ce.js";import"./web3-core-1459409c.js";import"./web3-eth-iban-921c5698.js";import"./events-f5832a60.js";import"./web3-eth-contract-4c0913ec.js";import"./web3-eth-abi-08eb3436.js";import"./web3-eth-personal-e04a6d7d.js";import"./web3-net-328a965a.js";import"./web3-providers-http-c372b64e.js";import"./isomorphic-ws-3852a342.js";import"./web3-eth-accounts-9f6286f6.js";import"./crc-32-91e6c902.js";import"./@ethereumjs-a0310e2a.js";import"./web3-eth-ens-f158b4ff.js";import"./web3-rpc-methods-92ffa281.js";import{d as V}from"./react-router-d6ff755c.js";import{u as Y}from"./react-i18next-e3fc60cf.js";import"./react-dom-3bfafca0.js";import"./scheduler-765c72db.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./use-sync-external-store-b588041f.js";import"./clsx-1229b3e0.js";import"./index-4749bbbd.js";import"./wagmi-a971f881.js";import"./@tanstack-45f509e5.js";import"./@wagmi-21bd2ff5.js";import"./zustand-96774db3.js";import"./viem-a9891897.js";import"./@noble-904ea724.js";import"./eventemitter3-951c0ce8.js";import"./@reduxjs-5da8789b.js";import"./immer-41fd5235.js";import"./redux-4e8b28bc.js";import"./@babel-1086f5cb.js";import"./redux-thunk-ef899f4c.js";import"./react-router-dom-e78e2396.js";import"./history-ab5531d8.js";import"./resolve-pathname-e210f2ac.js";import"./value-equal-17d7769a.js";import"./tiny-invariant-dd7d57d2.js";import"./axios-4a70c6fc.js";import"./query-string-e8aaf39e.js";import"./i18next-81de2c97.js";import"./i18next-browser-languagedetector-057d838e.js";import"./mini-create-react-context-6807ee74.js";import"./prop-types-19d89cee.js";import"./path-to-regexp-e4bf7bdb.js";import"./isarray-7a86238f.js";import"./web3-utils-f506bce1.js";import"./ethereum-cryptography-7a8fc714.js";import"./generate-object-property-1640c2ae.js";import"./is-property-a3b90be8.js";import"./generate-function-2107d0cc.js";import"./util-32fc8906.js";import"./is-arguments-9b6b3db9.js";import"./has-tostringtag-8d69f99b.js";import"./has-symbols-0e5b2b17.js";import"./call-bind-fbeaed3a.js";import"./get-intrinsic-bf3ae291.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./is-generator-function-72117440.js";import"./which-typed-array-1a4aeff0.js";import"./for-each-7354804a.js";import"./is-callable-ff085ac5.js";import"./available-typed-arrays-85fa10d0.js";import"./gopd-b600775e.js";import"./is-typed-array-ad00ea9f.js";import"./inherits-2c87d58f.js";import"./jsonpointer-f89e8d1e.js";import"./xtend-2b056f5a.js";import"./is-my-ip-valid-19512908.js";import"./web3-providers-ws-289daea9.js";import"./@ethersproject-c3cfd277.js";import"./bn.js-ef330038.js";import"./js-sha3-4b901396.js";import"./cross-fetch-a335b71a.js";const M=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"_name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"_symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],h=async()=>{let r;const t=await _();if(t){r=new G(t);const o=await r.eth.getChainId();if(parseInt(o)!==56)return d.error("Your Wallet network is not supported yet, please select BSC"),!1}else return console.log("no ethereum wallet detected"),d.error("Please install or enable MetaMask.",{delay:1e3}),!1;return r},C=async()=>{const r=await h();if(!r)return!1;const t=await r.eth.getAccounts();if(t.length)return t[0]},R=async(r,t)=>{const o=await h();return o?new o.eth.Contract(r,t):!1},Q=async r=>{const t=await h(),l=await(await R(M,"0x55d398326f99059ff775485246999027b3197955")).methods.balanceOf(r).call();return t.utils.fromWei(l,"ether")},N=async(r,t)=>{const o=await C(),l=await h();return(await R(M,"0x55d398326f99059ff775485246999027b3197955")).methods.transfer(r,l.utils.toWei(t.toString(),"ether")).send({from:o}).then(p=>p).catch(p=>{d.error(p.message)})},Ft=()=>{const r=V(),{t}=Y(),[o,l]=i.useState(!0),[a,p]=i.useState(null),[k,f]=i.useState(!1),[P,x]=i.useState(!1),[z,g]=i.useState(!1),[u,c]=i.useState(0),{userInfo:m}=L(n=>n.auth),[F,I]=i.useState(0),v=m.countPay===0?7:0,[w,S]=i.useState(1),[B,D]=i.useState(0),E=i.useCallback(async()=>{if(a&&a.registerFee!==0){f(!0);try{const n=await N("0x4240ED0D6ef9a25FD36066CE7e8009DB6F4780B8",a.registerFee),{transactionHash:s}=n;await b(a.transIds.register,s,"REGISTER"),c(2),f(!1)}catch{f(!1)}}},[a]),H=i.useCallback(async()=>{x(!0);try{const n=await N(a.directCommissionWallet,a.directCommissionFee),{transactionHash:s}=n;await b(a.transIds.direct,s,"DIRECT"),c(3),x(!1)}catch{x(!1)}},[a]),A=async()=>{g(!0);try{const n=await N(a.referralCommissionWallet,a.referralCommissionFee),{transactionHash:s}=n;await b(a.transIds.referral,s,"REFERRAL"),c(4),g(!1)}catch{g(!1)}},b=async(n,s)=>{await T.addPayment({id:n,hash:s}).then(j=>{d.success(t(j.data.message))}).catch(j=>{console.log(j)})},O=i.useCallback(async()=>{await T.onDonePayment({transIds:a.transIds}).then(n=>{const{message:s}=n.data;d.success(t(s)),r.push("/")}).catch(n=>{let s=n.response&&n.response.data.message?n.response.data.message:n.message;d.error(t(s))})},[a]);i.useEffect(()=>{I(v+w*15*Math.pow(2,m.tier))},[w,m,v]),i.useEffect(()=>{(async()=>{const n=await C(),s=await Q(n);D(s)})()},[u]);const W=async()=>{await T.getPaymentInfo().then(n=>{l(!0),p(n.data);const{step:s}=n.data;c(s),l(!1)}).catch(n=>{let s=n.response&&n.response.data.message?n.response.data.message:n.message;d.error(t(s))})};return i.useEffect(()=>{W()},[]),e.jsxs(e.Fragment,{children:[e.jsx(U,{}),e.jsxs("div",{className:"w-full mx-auto rounded-lg bg-white shadow-xl p-5 text-gray-700 mt-4",style:{maxWidth:"600px"},children:[e.jsx("div",{className:"mb-10",children:e.jsx("h1",{className:"text-center font-bold text-xl uppercase",children:t("paymentTitle")})}),m.countPay===0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"font-bold text-sm mb-2 ml-1",children:[t("registerFee")," (USDT)"]}),e.jsx("div",{children:e.jsx("input",{className:"w-full px-3 py-2 mb-1 border-2 border-gray-200 rounded-md focus:outline-none focus:border-indigo-500 transition-colors",type:"text",value:v,readOnly:!0})})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"font-bold text-sm mb-2 ml-1",children:t("weeks")}),e.jsx("div",{children:e.jsxs("select",{disabled:!0,onChange:n=>S(n.target.value),value:w,className:"form-select w-full px-3 py-2 mb-1 border-2 border-gray-200 rounded-md focus:outline-none focus:border-indigo-500 transition-colors cursor-pointer",children:[e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"7",children:"7"}),e.jsx("option",{value:"8",children:"8"}),e.jsx("option",{value:"9",children:"9"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"11",children:"11"}),e.jsx("option",{value:"12",children:"12"})]})})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("p",{className:"text-lg mb-2 ml-1",children:[e.jsx("span",{className:"font-bold",children:"Total"})," : ",F," USDT"]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("p",{className:"text-lg mb-2 ml-1",children:[e.jsx("span",{className:"font-bold",children:t("yourBalance")})," :"," ",B," USDT"]})}),o?e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(y,{})}):e.jsxs(e.Fragment,{children:[u===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex p-4 mb-4 text-sm text-blue-800 rounded-lg bg-blue-50 ",role:"alert",children:[e.jsx("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("registerFee"),"!"]})," ",t("pleasePay"),"."]})]}),e.jsx("div",{children:e.jsxs("button",{type:"submit",onClick:E,className:"w-full flex justify-center items-center hover:underline gradient text-white font-bold rounded-full my-6 py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out",children:[k&&e.jsx(y,{}),t("payment")]})})]}),u===2&&e.jsxs(e.Fragment,{children:[m.countPay===0&&e.jsxs("div",{className:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 ",role:"alert",children:[e.jsx("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("registerFee"),"!"]})," ",t("Payment successful"),"."]})]}),e.jsxs("div",{className:"flex p-4 mb-4 text-sm text-blue-800 rounded-lg bg-blue-50 ",role:"alert",children:[e.jsx("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("commissionFee"),"!"]})," ",t("pleasePay"),"."]})]}),e.jsx("div",{children:e.jsxs("button",{type:"submit",onClick:H,className:"w-full flex justify-center items-center hover:underline gradient text-white font-bold rounded-full my-6 py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out",children:[P&&e.jsx(y,{}),t("payment")]})})]}),u===3&&e.jsxs(e.Fragment,{children:[m.countPay===0&&e.jsxs("div",{className:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 ",role:"alert",children:[e.jsx("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("registerFee"),"!"]})," ",t("Payment successful"),"."]})]}),e.jsxs("div",{className:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 ",role:"alert",children:[e.jsx("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("commissionFee"),"!"]})," ",t("Payment successful"),"."]})]}),e.jsxs("div",{className:"flex p-4 mb-4 text-sm text-blue-800 rounded-lg bg-blue-50 ",role:"alert",children:[e.jsx("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("lahFuns"),"!"]})," ",t("pleasePay"),"."]})]}),e.jsx("div",{children:e.jsxs("button",{type:"submit",onClick:A,className:"w-full flex justify-center items-center hover:underline gradient text-white font-bold rounded-full my-6 py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out",children:[z&&e.jsx(y,{}),t("payment")]})})]}),u===4&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 ",role:"alert",children:[e.jsx("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("registerFee"),"!"]})," ",t("Payment successful"),"."]})]}),e.jsxs("div",{className:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 ",role:"alert",children:[e.jsx("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("commissionFee"),"!"]})," ",t("Payment successful"),"."]})]}),e.jsxs("div",{className:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 ",role:"alert",children:[e.jsx("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("lahFuns"),"!"]})," ",t("Payment successful"),"."]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",onClick:O,className:"w-full flex justify-center items-center hover:underline gradient text-white font-bold rounded-full my-6 py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out",children:t("donePayment")})})]})]})]})]})};export{Ft as default};
