import{j as y,_ as m,l as K}from"./@babel-1086f5cb.js";import{R as p}from"./react-2cd99521.js";import{c as V,a as g,b as z,l as G}from"./history-ab5531d8.js";import{i as I}from"./mini-create-react-context-6807ee74.js";import{i as x}from"./tiny-invariant-dd7d57d2.js";import{p as w}from"./path-to-regexp-e4bf7bdb.js";import"./react-is-e8e5dbb3.js";import"./hoist-non-react-statics-23d96a9a.js";var B=function(t){var o=I();return o.displayName=t,o},T=B("Router-History"),v=B("Router"),W=function(n){y(t,n),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:e==="/"}};function t(r){var e;return e=n.call(this,r)||this,e.state={location:r.history.location},e._isMounted=!1,e._pendingLocation=null,r.staticContext||(e.unlisten=r.history.listen(function(i){e._pendingLocation=i})),e}var o=t.prototype;return o.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(i){e._isMounted&&e.setState({location:i})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},o.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},o.render=function(){return p.createElement(v.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},p.createElement(T.Provider,{children:this.props.children||null,value:this.props.history}))},t}(p.Component);p.Component;var J=function(n){y(t,n);function t(){return n.apply(this,arguments)||this}var o=t.prototype;return o.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},o.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},o.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},o.render=function(){return null},t}(p.Component),E={},Q=1e4,b=0;function X(n){if(E[n])return E[n];var t=w.compile(n);return b<Q&&(E[n]=t,b++),t}function $(n,t){return n===void 0&&(n="/"),t===void 0&&(t={}),n==="/"?n:X(n)(t,{pretty:!0})}function lt(n){var t=n.computedMatch,o=n.to,r=n.push,e=r===void 0?!1:r;return p.createElement(v.Consumer,null,function(i){i||x(!1);var a=i.history,l=i.staticContext,c=e?a.push:a.replace,u=g(t?typeof o=="string"?$(o,t.params):m({},o,{pathname:$(o.pathname,t.params)}):o);return l?(c(u),null):p.createElement(J,{onMount:function(){c(u)},onUpdate:function(f,h){var d=g(h.to);G(d,m({},u,{key:d.key}))||c(u)},to:o})})}var A={},Y=1e4,S=0;function Z(n,t){var o=""+t.end+t.strict+t.sensitive,r=A[o]||(A[o]={});if(r[n])return r[n];var e=[],i=w(n,e,t),a={regexp:i,keys:e};return S<Y&&(r[n]=a,S++),a}function k(n,t){t===void 0&&(t={}),(typeof t=="string"||Array.isArray(t))&&(t={path:t});var o=t,r=o.path,e=o.exact,i=e===void 0?!1:e,a=o.strict,l=a===void 0?!1:a,c=o.sensitive,u=c===void 0?!1:c,s=[].concat(r);return s.reduce(function(f,h){if(!h&&h!=="")return null;if(f)return f;var d=Z(h,{end:i,strict:l,sensitive:u}),M=d.regexp,j=d.keys,_=M.exec(n);if(!_)return null;var C=_[0],O=_.slice(1),U=n===C;return i&&!U?null:{path:h,url:h==="/"&&C===""?"/":C,isExact:U,params:j.reduce(function(R,q,F){return R[q.name]=O[F],R},{})}},null)}function tt(n){return p.Children.count(n)===0}var ht=function(n){y(t,n);function t(){return n.apply(this,arguments)||this}var o=t.prototype;return o.render=function(){var e=this;return p.createElement(v.Consumer,null,function(i){i||x(!1);var a=e.props.location||i.location,l=e.props.computedMatch?e.props.computedMatch:e.props.path?k(a.pathname,e.props):i.match,c=m({},i,{location:a,match:l}),u=e.props,s=u.children,f=u.component,h=u.render;return Array.isArray(s)&&tt(s)&&(s=null),p.createElement(v.Provider,{value:c},c.match?s?typeof s=="function"?s(c):s:f?p.createElement(f,c):h?h(c):null:typeof s=="function"?s(c):null)})},t}(p.Component);function P(n){return n.charAt(0)==="/"?n:"/"+n}function nt(n,t){return n?m({},t,{pathname:P(n)+t.pathname}):t}function et(n,t){if(!n)return t;var o=P(n);return t.pathname.indexOf(o)!==0?t:m({},t,{pathname:t.pathname.substr(o.length)})}function H(n){return typeof n=="string"?n:z(n)}function L(n){return function(){x(!1)}}function D(){}p.Component;var ft=function(n){y(t,n);function t(){return n.apply(this,arguments)||this}var o=t.prototype;return o.render=function(){var e=this;return p.createElement(v.Consumer,null,function(i){i||x(!1);var a=e.props.location||i.location,l,c;return p.Children.forEach(e.props.children,function(u){if(c==null&&p.isValidElement(u)){l=u;var s=u.props.path||u.props.from;c=s?k(a.pathname,m({},u.props,{path:s})):i.match}}),c?p.cloneElement(l,{location:a,computedMatch:c}):null})},t}(p.Component),N=p.useContext;function mt(){return N(T)}function dt(){return N(v).location}export{W as R,ft as S,ht as a,lt as b,v as c,mt as d,k as m,dt as u};
