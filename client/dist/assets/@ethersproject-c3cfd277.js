import{_ as Ne}from"./bn.js-ef330038.js";import{s as ye}from"./js-sha3-4b901396.js";const xe="logger/5.7.0";let Y=!1,v=!1;const k={debug:1,default:2,info:2,warning:3,error:4,off:5};let ee=k.default,j=null;function be(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(r){return r.message}return null}const te=be();var K;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(K||(K={}));var E;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(E||(E={}));const re="0123456789abcdef";class a{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();k[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(ee>k[n])&&console.log.apply(console,t)}debug(...e){this._log(a.levels.DEBUG,e)}info(...e){this._log(a.levels.INFO,e)}warn(...e){this._log(a.levels.WARNING,e)}makeError(e,t,n){if(v)return this.makeError("censored error",t,{});t||(t=a.errors.UNKNOWN_ERROR),n||(n={});const s=[];Object.keys(n).forEach(u=>{const h=n[u];try{if(h instanceof Uint8Array){let c="";for(let y=0;y<h.length;y++)c+=re[h[y]>>4],c+=re[h[y]&15];s.push(u+"=Uint8Array(0x"+c+")")}else s.push(u+"="+JSON.stringify(h))}catch{s.push(u+"="+JSON.stringify(n[u].toString()))}}),s.push(`code=${t}`),s.push(`version=${this.version}`);const o=e;let i="";switch(t){case E.NUMERIC_FAULT:{i="NUMERIC_FAULT";const u=e;switch(u){case"overflow":case"underflow":case"division-by-zero":i+="-"+u;break;case"negative-power":case"negative-width":i+="-unsupported";break;case"unbound-bitwise-result":i+="-unbound-result";break}break}case E.CALL_EXCEPTION:case E.INSUFFICIENT_FUNDS:case E.MISSING_NEW:case E.NONCE_EXPIRED:case E.REPLACEMENT_UNDERPRICED:case E.TRANSACTION_REPLACED:case E.UNPREDICTABLE_GAS_LIMIT:i=t;break}i&&(e+=" [ See: https://links.ethers.org/v5-errors-"+i+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const f=new Error(e);return f.reason=o,f.code=t,Object.keys(n).forEach(function(u){f[u]=n[u]}),f}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,a.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,s){e||this.throwError(t,n,s)}assertArgument(e,t,n,s){e||this.throwArgumentError(t,n,s)}checkNormalize(e){te&&this.throwError("platform missing String.prototype.normalize",a.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:te})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,a.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,a.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n?n=": "+n:n="",e<t&&this.throwError("missing argument"+n,a.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,a.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",a.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",a.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",a.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return j||(j=new a(xe)),j}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",a.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Y){if(!e)return;this.globalLogger().throwError("error censorship permanent",a.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}v=!!e,Y=!!t}static setLogLevel(e){const t=k[e.toLowerCase()];if(t==null){a.globalLogger().warn("invalid log level - "+e);return}ee=t}static from(e){return new a(e)}}a.errors=E;a.levels=K;const _e="bytes/5.7.0",_=new a(_e);function he(r){return!!r.toHexString}function C(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return C(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function ne(r){return typeof r=="number"&&r==r&&r%1===0}function Z(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!ne(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!ne(t)||t<0||t>=256)return!1}return!0}function N(r,e){if(e||(e={}),typeof r=="number"){_.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),C(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),he(r)&&(r=r.toHexString()),U(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":_.throwArgumentError("hex data is odd-length","value",r));const n=[];for(let s=0;s<t.length;s+=2)n.push(parseInt(t.substring(s,s+2),16));return C(new Uint8Array(n))}return Z(r)?C(new Uint8Array(r)):_.throwArgumentError("invalid arrayify value","value",r)}function $(r){const e=r.map(s=>N(s)),t=e.reduce((s,o)=>s+o.length,0),n=new Uint8Array(t);return e.reduce((s,o)=>(n.set(o,s),s+o.length),0),C(n)}function U(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const W="0123456789abcdef";function O(r,e){if(e||(e={}),typeof r=="number"){_.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=W[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),he(r))return r.toHexString();if(U(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":_.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(Z(r)){let t="0x";for(let n=0;n<r.length;n++){let s=r[n];t+=W[(s&240)>>4]+W[s&15]}return t}return _.throwArgumentError("invalid hexlify value","value",r)}function Ae(r){let e="0x";return r.forEach(t=>{e+=O(t).substring(2)}),e}function Re(r,e){for(typeof r!="string"?r=O(r):U(r)||_.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&_.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}const Te="bignumber/5.7.0";var B=Ne.BN;const x=new a(Te),X={},ie=9007199254740991;let se=!1;class d{constructor(e,t){e!==X&&x.throwError("cannot call constructor directly; use BigNumber.from",a.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return g(l(this).fromTwos(e))}toTwos(e){return g(l(this).toTwos(e))}abs(){return this._hex[0]==="-"?d.from(this._hex.substring(1)):this}add(e){return g(l(this).add(l(e)))}sub(e){return g(l(this).sub(l(e)))}div(e){return d.from(e).isZero()&&p("division-by-zero","div"),g(l(this).div(l(e)))}mul(e){return g(l(this).mul(l(e)))}mod(e){const t=l(e);return t.isNeg()&&p("division-by-zero","mod"),g(l(this).umod(t))}pow(e){const t=l(e);return t.isNeg()&&p("negative-power","pow"),g(l(this).pow(t))}and(e){const t=l(e);return(this.isNegative()||t.isNeg())&&p("unbound-bitwise-result","and"),g(l(this).and(t))}or(e){const t=l(e);return(this.isNegative()||t.isNeg())&&p("unbound-bitwise-result","or"),g(l(this).or(t))}xor(e){const t=l(e);return(this.isNegative()||t.isNeg())&&p("unbound-bitwise-result","xor"),g(l(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&p("negative-width","mask"),g(l(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&p("negative-width","shl"),g(l(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&p("negative-width","shr"),g(l(this).shrn(e))}eq(e){return l(this).eq(l(e))}lt(e){return l(this).lt(l(e))}lte(e){return l(this).lte(l(e))}gt(e){return l(this).gt(l(e))}gte(e){return l(this).gte(l(e))}isNegative(){return this._hex[0]==="-"}isZero(){return l(this).isZero()}toNumber(){try{return l(this).toNumber()}catch{p("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return x.throwError("this platform does not support BigInt",a.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?se||(se=!0,x.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?x.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",a.errors.UNEXPECTED_ARGUMENT,{}):x.throwError("BigNumber.toString does not accept parameters",a.errors.UNEXPECTED_ARGUMENT,{})),l(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof d)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new d(X,F(e)):e.match(/^-?[0-9]+$/)?new d(X,F(new B(e))):x.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&p("underflow","BigNumber.from",e),(e>=ie||e<=-ie)&&p("overflow","BigNumber.from",e),d.from(String(e));const t=e;if(typeof t=="bigint")return d.from(t.toString());if(Z(t))return d.from(O(t));if(t)if(t.toHexString){const n=t.toHexString();if(typeof n=="string")return d.from(n)}else{let n=t._hex;if(n==null&&t.type==="BigNumber"&&(n=t.hex),typeof n=="string"&&(U(n)||n[0]==="-"&&U(n.substring(1))))return d.from(n)}return x.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function F(r){if(typeof r!="string")return F(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&x.throwArgumentError("invalid hex","value",r),r=F(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function g(r){return d.from(F(r))}function l(r){const e=d.from(r).toHexString();return e[0]==="-"?new B("-"+e.substring(3),16):new B(e.substring(2),16)}function p(r,e,t){const n={fault:r,operation:e};return t!=null&&(n.value=t),x.throwError(r,a.errors.NUMERIC_FAULT,n)}function Se(r){return new B(r,36).toString(16)}globalThis&&globalThis.__awaiter;function R(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}const L="abi/5.7.0",P=new a(L),oe={};let fe={calldata:!0,memory:!0,storage:!0},Ue={calldata:!0,memory:!0};function D(r,e){if(r==="bytes"||r==="string"){if(fe[e])return!0}else if(r==="address"){if(e==="payable")return!0}else if((r.indexOf("[")>=0||r==="tuple")&&Ue[e])return!0;return(fe[e]||e==="payable")&&P.throwArgumentError("invalid modifier","name",e),!1}function Oe(r,e){let t=r;function n(f){P.throwArgumentError(`unexpected character at position ${f}`,"param",r)}r=r.replace(/\s/g," ");function s(f){let u={type:"",name:"",parent:f,state:{allowType:!0}};return e&&(u.indexed=!1),u}let o={type:"",name:"",state:{allowType:!0}},i=o;for(let f=0;f<r.length;f++){let u=r[f];switch(u){case"(":i.state.allowType&&i.type===""?i.type="tuple":i.state.allowParams||n(f),i.state.allowType=!1,i.type=T(i.type),i.components=[s(i)],i=i.components[0];break;case")":delete i.state,i.name==="indexed"&&(e||n(f),i.indexed=!0,i.name=""),D(i.type,i.name)&&(i.name=""),i.type=T(i.type);let h=i;i=i.parent,i||n(f),delete h.parent,i.state.allowParams=!1,i.state.allowName=!0,i.state.allowArray=!0;break;case",":delete i.state,i.name==="indexed"&&(e||n(f),i.indexed=!0,i.name=""),D(i.type,i.name)&&(i.name=""),i.type=T(i.type);let c=s(i.parent);i.parent.components.push(c),delete i.parent,i=c;break;case" ":i.state.allowType&&i.type!==""&&(i.type=T(i.type),delete i.state.allowType,i.state.allowName=!0,i.state.allowParams=!0),i.state.allowName&&i.name!==""&&(i.name==="indexed"?(e||n(f),i.indexed&&n(f),i.indexed=!0,i.name=""):D(i.type,i.name)?i.name="":i.state.allowName=!1);break;case"[":i.state.allowArray||n(f),i.type+=u,i.state.allowArray=!1,i.state.allowName=!1,i.state.readArray=!0;break;case"]":i.state.readArray||n(f),i.type+=u,i.state.readArray=!1,i.state.allowArray=!0,i.state.allowName=!0;break;default:i.state.allowType?(i.type+=u,i.state.allowParams=!0,i.state.allowArray=!0):i.state.allowName?(i.name+=u,delete i.state.allowArray):i.state.readArray?i.type+=u:n(f)}}return i.parent&&P.throwArgumentError("unexpected eof","param",r),delete o.state,i.name==="indexed"?(e||n(t.length-7),i.indexed&&n(t.length-7),i.indexed=!0,i.name=""):D(i.type,i.name)&&(i.name=""),o.type=T(o.type),o}function H(r,e){for(let t in e)R(r,t,e[t])}const A=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Ie=new RegExp(/^(.*)\[([0-9]*)\]$/);class w{constructor(e,t){e!==oe&&P.throwError("use fromString",a.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),H(this,t);let n=this.type.match(Ie);n?H(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:w.fromObject({type:n[1],components:this.components}),baseType:"array"}):H(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=A.sighash),A[e]||P.throwArgumentError("invalid format type","format",e),e===A.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(n)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==A.sighash&&(t+=this.type),t+="("+this.components.map(n=>n.format(e)).join(e===A.full?", ":",")+")"):t+=this.type,e!==A.sighash&&(this.indexed===!0&&(t+=" indexed"),e===A.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?w.fromString(e,t):w.fromObject(e)}static fromObject(e){return w.isParamType(e)?e:new w(oe,{name:e.name||null,type:T(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(w.fromObject):null})}static fromString(e,t){function n(s){return w.fromObject({name:s.name,type:s.type,indexed:s.indexed,components:s.components})}return n(Oe(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function T(r){return r.match(/^uint($|[^1-9])/)?r="uint256"+r.substring(4):r.match(/^int($|[^1-9])/)&&(r="int256"+r.substring(3)),r}const q=new a(L);class b{constructor(e,t,n,s){this.name=e,this.type=t,this.localName=n,this.dynamic=s}_throwError(e,t){q.throwArgumentError(e,this.localName,t)}}class J{constructor(e){R(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Ae(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData($(e._data))}writeBytes(e){let t=N(e);const n=t.length%this.wordSize;return n&&(t=$([t,this._padding.slice(n)])),this._writeData(t)}_getValue(e){let t=N(d.from(e));return t.length>this.wordSize&&q.throwError("value out-of-bounds",a.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=$([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class z{constructor(e,t,n,s){R(this,"_data",N(e)),R(this,"wordSize",t||32),R(this,"_coerceFunc",n),R(this,"allowLoose",s),this._offset=0}get data(){return O(this._data)}get consumed(){return this._offset}static coerce(e,t){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):z.coerce(e,t)}_peekBytes(e,t,n){let s=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+s>this._data.length&&(this.allowLoose&&n&&this._offset+t<=this._data.length?s=t:q.throwError("data out-of-bounds",a.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+s})),this._data.slice(this._offset,this._offset+s)}subReader(e){return new z(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let n=this._peekBytes(0,e,!!t);return this._offset+=n.length,n.slice(0,e)}readValue(){return d.from(this.readBytes(this.wordSize))}}function Ce(r){return"0x"+ye.keccak_256(N(r))}const Fe="address/5.7.0",I=new a(Fe);function ae(r){U(r,20)||I.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);const n=N(Ce(t));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const Pe=9007199254740991;function De(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const Q={};for(let r=0;r<10;r++)Q[String(r)]=String(r);for(let r=0;r<26;r++)Q[String.fromCharCode(65+r)]=String(10+r);const ue=Math.floor(De(Pe));function Me(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>Q[n]).join("");for(;e.length>=ue;){let n=e.substring(0,ue);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function le(r){let e=null;if(typeof r!="string"&&I.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=ae(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&I.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==Me(r)&&I.throwArgumentError("bad icap checksum","address",r),e=Se(r.substring(4));e.length<40;)e="0"+e;e=ae("0x"+e)}else I.throwArgumentError("invalid address","address",r);return e}class Ve extends b{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=le(t)}catch(n){this._throwError(n.message,t)}return e.writeValue(t)}decode(e){return le(Re(e.readValue().toHexString(),20))}}class ke extends b{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const S=new a(L);function ce(r,e,t){let n=null;if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let u={};n=e.map(h=>{const c=h.localName;return c||S.throwError("cannot encode object for signature with missing names",a.errors.INVALID_ARGUMENT,{argument:"values",coder:h,value:t}),u[c]&&S.throwError("cannot encode object for signature with duplicate names",a.errors.INVALID_ARGUMENT,{argument:"values",coder:h,value:t}),u[c]=!0,t[c]})}else S.throwArgumentError("invalid tuple value","tuple",t);e.length!==n.length&&S.throwArgumentError("types/value length mismatch","tuple",t);let s=new J(r.wordSize),o=new J(r.wordSize),i=[];e.forEach((u,h)=>{let c=n[h];if(u.dynamic){let y=o.length;u.encode(o,c);let Ee=s.writeUpdatableValue();i.push(we=>{Ee(we+y)})}else u.encode(s,c)}),i.forEach(u=>{u(s.length)});let f=r.appendWriter(s);return f+=r.appendWriter(o),f}function de(r,e){let t=[],n=r.subReader(0);e.forEach(o=>{let i=null;if(o.dynamic){let f=r.readValue(),u=n.subReader(f.toNumber());try{i=o.decode(u)}catch(h){if(h.code===a.errors.BUFFER_OVERRUN)throw h;i=h,i.baseType=o.name,i.name=o.localName,i.type=o.type}}else try{i=o.decode(r)}catch(f){if(f.code===a.errors.BUFFER_OVERRUN)throw f;i=f,i.baseType=o.name,i.name=o.localName,i.type=o.type}i!=null&&t.push(i)});const s=e.reduce((o,i)=>{const f=i.localName;return f&&(o[f]||(o[f]=0),o[f]++),o},{});e.forEach((o,i)=>{let f=o.localName;if(!f||s[f]!==1||(f==="length"&&(f="_length"),t[f]!=null))return;const u=t[i];u instanceof Error?Object.defineProperty(t,f,{enumerable:!0,get:()=>{throw u}}):t[f]=u});for(let o=0;o<t.length;o++){const i=t[o];i instanceof Error&&Object.defineProperty(t,o,{enumerable:!0,get:()=>{throw i}})}return Object.freeze(t)}class Be extends b{constructor(e,t,n){const s=e.type+"["+(t>=0?t:"")+"]",o=t===-1||e.dynamic;super("array",s,n,o),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let n=this.length;n===-1&&(n=t.length,e.writeValue(t.length)),S.checkArgumentCount(t.length,n,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let o=0;o<t.length;o++)s.push(this.coder);return ce(e,s,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&S.throwError("insufficient data length",a.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let n=[];for(let s=0;s<t;s++)n.push(new ke(this.coder));return e.coerce(this.name,de(e,n))}}class ze extends b{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class ge extends b{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=N(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Ge extends ge{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,O(super.decode(e)))}}class Le extends b{constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let n=N(t);return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return e.coerce(this.name,O(e.readBytes(this.size)))}}class je extends b{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const $e=d.from(-1),We=d.from(0),Xe=d.from(1),He=d.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Ke extends b{constructor(e,t,n){const s=(t?"int":"uint")+e*8;super(s,s,n,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let n=d.from(t),s=He.mask(e.wordSize*8);if(this.signed){let o=s.mask(this.size*8-1);(n.gt(o)||n.lt(o.add(Xe).mul($e)))&&this._throwError("value out-of-bounds",t)}else(n.lt(We)||n.gt(s.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}const Je="strings/5.7.0",me=new a(Je);var G;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(G||(G={}));var m;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(m||(m={}));function Ze(r,e,t,n,s){return me.throwArgumentError(`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function pe(r,e,t,n,s){if(r===m.BAD_PREFIX||r===m.UNEXPECTED_CONTINUE){let o=0;for(let i=e+1;i<t.length&&t[i]>>6===2;i++)o++;return o}return r===m.OVERRUN?t.length-e-1:0}function qe(r,e,t,n,s){return r===m.OVERLONG?(n.push(s),0):(n.push(65533),pe(r,e,t))}const Qe=Object.freeze({error:Ze,ignore:pe,replace:qe});function Ye(r,e){e==null&&(e=Qe.error),r=N(r);const t=[];let n=0;for(;n<r.length;){const s=r[n++];if(!(s>>7)){t.push(s);continue}let o=null,i=null;if((s&224)===192)o=1,i=127;else if((s&240)===224)o=2,i=2047;else if((s&248)===240)o=3,i=65535;else{(s&192)===128?n+=e(m.UNEXPECTED_CONTINUE,n-1,r,t):n+=e(m.BAD_PREFIX,n-1,r,t);continue}if(n-1+o>=r.length){n+=e(m.OVERRUN,n-1,r,t);continue}let f=s&(1<<8-o-1)-1;for(let u=0;u<o;u++){let h=r[n];if((h&192)!=128){n+=e(m.MISSING_CONTINUE,n,r,t),f=null;break}f=f<<6|h&63,n++}if(f!==null){if(f>1114111){n+=e(m.OUT_OF_RANGE,n-1-o,r,t,f);continue}if(f>=55296&&f<=57343){n+=e(m.UTF16_SURROGATE,n-1-o,r,t,f);continue}if(f<=i){n+=e(m.OVERLONG,n-1-o,r,t,f);continue}t.push(f)}}return t}function ve(r,e=G.current){e!=G.current&&(me.checkNormalize(),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){n++;const o=r.charCodeAt(n);if(n>=r.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");const i=65536+((s&1023)<<10)+(o&1023);t.push(i>>18|240),t.push(i>>12&63|128),t.push(i>>6&63|128),t.push(i&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return N(t)}function et(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function tt(r,e){return et(Ye(r,e))}class rt extends ge{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,ve(t))}decode(e){return tt(super.decode(e))}}class M extends b{constructor(e,t){let n=!1;const s=[];e.forEach(i=>{i.dynamic&&(n=!0),s.push(i.type)});const o="tuple("+s.join(",")+")";super("tuple",o,t,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const t=this.coders.reduce((n,s)=>{const o=s.localName;return o&&(n[o]||(n[o]=0),n[o]++),n},{});return this.coders.forEach((n,s)=>{let o=n.localName;!o||t[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[s]))}),Object.freeze(e)}encode(e,t){return ce(e,this.coders,t)}decode(e){return e.coerce(this.name,de(e,this.coders))}}const V=new a(L),nt=new RegExp(/^bytes([0-9]*)$/),it=new RegExp(/^(u?int)([0-9]*)$/);class st{constructor(e){R(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Ve(e.name);case"bool":return new ze(e.name);case"string":return new rt(e.name);case"bytes":return new Ge(e.name);case"array":return new Be(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new M((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new je(e.name)}let t=e.type.match(it);if(t){let n=parseInt(t[2]||"256");return(n===0||n>256||n%8!==0)&&V.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Ke(n/8,t[1]==="int",e.name)}if(t=e.type.match(nt),t){let n=parseInt(t[1]);return(n===0||n>32)&&V.throwArgumentError("invalid bytes length","param",e),new Le(n,e.name)}return V.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new z(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new J(this._getWordSize())}getDefaultValue(e){const t=e.map(s=>this._getCoder(w.from(s)));return new M(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&V.throwError("types/values length mismatch",a.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const n=e.map(i=>this._getCoder(w.from(i))),s=new M(n,"_"),o=this._getWriter();return s.encode(o,t),o.data}decode(e,t,n){const s=e.map(i=>this._getCoder(w.from(i)));return new M(s,"_").decode(this._getReader(N(t),n))}}new st;export{st as A,w as P};
