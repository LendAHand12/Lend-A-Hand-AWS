import{r as p,j as e}from"./react-2cd99521.js";import{a as I,u as T}from"./react-redux-5bfe471e.js";import{b as q}from"./wagmi-a971f881.js";import{b as P,U as O,c as V}from"./index-4749bbbd.js";import{L as M}from"./index-f32d7dd4.js";import{u as $}from"./react-hook-form-bd013bdf.js";import{k as W,Q as b}from"./react-toastify-9069338f.js";import{u as Y}from"./react-i18next-e3fc60cf.js";import"./@ethereumjs-a0310e2a.js";import"./react-dom-3bfafca0.js";import"./scheduler-765c72db.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./use-sync-external-store-b588041f.js";import"./@tanstack-45f509e5.js";import"./@wagmi-21bd2ff5.js";import"./zustand-96774db3.js";import"./viem-a9891897.js";import"./@noble-904ea724.js";import"./eventemitter3-951c0ce8.js";import"./@reduxjs-5da8789b.js";import"./immer-41fd5235.js";import"./redux-4e8b28bc.js";import"./@babel-1086f5cb.js";import"./redux-thunk-ef899f4c.js";import"./react-router-dom-e78e2396.js";import"./react-router-d6ff755c.js";import"./history-ab5531d8.js";import"./resolve-pathname-e210f2ac.js";import"./value-equal-17d7769a.js";import"./tiny-invariant-dd7d57d2.js";import"./mini-create-react-context-6807ee74.js";import"./prop-types-19d89cee.js";import"./path-to-regexp-e4bf7bdb.js";import"./isarray-7a86238f.js";import"./axios-4a70c6fc.js";import"./query-string-e8aaf39e.js";import"./i18next-81de2c97.js";import"./i18next-browser-languagedetector-057d838e.js";import"./clsx-1229b3e0.js";const Re=()=>{var y,N,v;const{t:s}=Y(),h=I(),[w,d]=p.useState(),{userInfo:o}=T(a=>a.auth);let{email:k,userId:F,walletAddress:A,createdAt:L,id:u,status:i,tier:E,fine:D}=o;const[c,f]=p.useState(""),[n,j]=p.useState(""),{register:m,handleSubmit:B,formState:{errors:x}}=$({defaultValues:{walletAddress:A}}),{disconnect:R}=q(),C=()=>{R(),h(P())},S=async a=>{const{walletAddress:l,imgFront:r,imgBack:g}=a;d(!0),await O.update(u,{walletAddress:l,imgFront:r&&r[0]?r[0]:"",imgBack:g&&g[0]?g[0]:""}).then(t=>{d(!1),b.success(s(t.data.message)),h(V(t.data.data))}).catch(t=>{let U=t.response&&t.response.data.error?t.response.data.error:t.message;b.error(s(U)),d(!1)})};return e.jsxs("div",{children:[e.jsx(W,{}),e.jsxs("div",{className:"container mx-auto p-5",children:[i==="UNVERIFY"&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-5",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:s("verifyAccountAlert")})}),e.jsxs("div",{className:"md:flex no-wrap md:-mx-2 ",children:[e.jsx("div",{className:"w-full lg:w-3/12 lg:mx-2 mb-4 lg:mb-0",children:e.jsx("div",{className:"bg-white shadow-md p-3 border-t-4 border-primary",children:e.jsxs("ul",{className:"bg-gray-100 text-gray-600 hover:text-gray-700 hover:shadow py-2 px-3 mt-3 divide-y rounded shadow-sm",children:[e.jsxs("li",{className:"flex items-center py-3",children:[e.jsx("span",{children:s("status")}),e.jsx("span",{className:"ml-auto",children:e.jsx("span",{className:`${i==="UNVERIFY"?"bg-red-600":i==="PENDING"?"bg-yellow-600":i==="APPROVED"?"bg-green-600":i==="REJECTED"||i==="LOCKED"?"bg-red-600":""}  py-1 px-2 rounded text-white text-sm`,children:s(i)})})]}),e.jsxs("li",{className:"flex items-center py-3",children:[e.jsx("span",{children:s("memberSince")}),e.jsx("span",{className:"ml-auto",children:new Date(L).toLocaleDateString("vi")})]})]})})}),e.jsx("div",{className:"w-full lg:w-9/12 lg:mx-2",children:e.jsxs("form",{onSubmit:B(S),encType:"multipart/form-data",className:"bg-white p-6 shadow-md rounded-sm border-t-4 border-primary",children:[e.jsx("div",{className:"text-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 text-sm",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"Ref code"}),e.jsx("div",{className:"px-4 py-2",children:u})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"User Name"}),e.jsx("div",{className:"px-4 py-2",children:F})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"Email"}),e.jsx("div",{className:"px-4 py-2",children:k})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:s("walletAddress")}),e.jsxs("div",{className:"",children:[e.jsx("input",{className:"w-full px-4 py-1 rounded-md border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white",...m("walletAddress",{required:"Wallet address is required",pattern:{value:/^0x[a-fA-F0-9]{40}$/g,message:s("Please enter the correct wallet format")}})}),e.jsx("p",{className:"error-message-text",children:(y=x.walletAddress)==null?void 0:y.message})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"Tier"}),e.jsx("div",{className:"px-4 py-2",children:E})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:s("fine")}),e.jsx("div",{className:"px-4 py-2",children:D})]}),i==="UNVERIFY"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center my-4",children:e.jsx("div",{className:"max-w-2xl rounded-lg shadow-xl bg-gray-50",children:e.jsxs("div",{className:"m-4",children:[e.jsx("label",{className:"inline-block mb-2 text-gray-500",children:s("idCardFront")}),e.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[e.jsxs("label",{className:"flex flex-col w-full h-40 border-4 border-blue-200 border-dashed hover:bg-gray-100 hover:border-gray-300",children:[c!==""?e.jsx("img",{src:c,className:"w-full h-full",alt:"the front of identity card"}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-7",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-gray-400 group-hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"pt-1 text-sm tracking-wider text-gray-400 group-hover:text-gray-600",children:"Attach a file"})]}),e.jsx("input",{...m("imgFront",{required:"The front of identity card is required"}),type:"file",onChange:a=>{a.preventDefault();let l=new FileReader,r=a.target.files[0];r&&r.type.match("image.*")?l.readAsDataURL(r):f(c),l.onloadend=function(){f(l.result)}},accept:"image/png, imgage/jpg, image/jpeg",className:"opacity-0"})]}),e.jsx("p",{className:"error-message-text",children:(N=x.imgFront)==null?void 0:N.message})]})]})})}),e.jsx("div",{className:"flex justify-center my-4",children:e.jsx("div",{className:"max-w-2xl rounded-lg shadow-xl bg-gray-50",children:e.jsxs("div",{className:"m-4",children:[e.jsx("label",{className:"inline-block mb-2 text-gray-500",children:s("idCardBack")}),e.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[e.jsxs("label",{className:"flex flex-col w-full h-40 border-4 border-blue-200 border-dashed hover:bg-gray-100 hover:border-gray-300",children:[n!==""?e.jsx("img",{src:n,className:"w-full h-full",alt:"the back of identity card"}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-7",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-gray-400 group-hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"pt-1 text-sm tracking-wider text-gray-400 group-hover:text-gray-600",children:"Attach a file"})]}),e.jsx("input",{...m("imgBack",{required:"The back of identity card is required"}),type:"file",onChange:a=>{a.preventDefault();let l=new FileReader,r=a.target.files[0];r&&r.type.match("image.*")?l.readAsDataURL(r):j(n),l.onloadend=function(){j(l.result)}},accept:"image/png, imgage/jpg, image/jpeg",className:"opacity-0"})]}),e.jsx("p",{className:"error-message-text",children:(v=x.imgBack)==null?void 0:v.message})]})]})})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:s("idCardFront")}),e.jsx("img",{src:`${o.imgFront}`,className:"w-full px-4 py-2"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:s("idCardBack")}),e.jsx("img",{src:`${o.imgBack}`,className:"w-full px-4 py-2"})]})]})]})}),e.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center hover:underline gradient text-white font-bold rounded-full my-6 py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out",children:[w&&e.jsx(M,{}),s("update")]}),e.jsx("button",{onClick:C,className:"w-full flex justify-center items-center hover:underline border font-bold rounded-full my-6 py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out",children:s("logout")})]})})]})]})]})};export{Re as default};
