import{r as c,j as e}from"./react-2cd99521.js";import{u as C}from"./react-hook-form-bd013bdf.js";import{L as U}from"./react-router-dom-e78e2396.js";import{Q as u,k as $}from"./react-toastify-9069338f.js";import{q as z}from"./query-string-e8aaf39e.js";import{L as F}from"./layout-e678985a.js";import{L as T}from"./index-f32d7dd4.js";import{A as y}from"./Auth-c3d56798.js";import{u as W}from"./react-i18next-e3fc60cf.js";import{u as D,d as H}from"./react-router-d6ff755c.js";import"./@ethereumjs-a0310e2a.js";import"./@babel-1086f5cb.js";import"./history-ab5531d8.js";import"./resolve-pathname-e210f2ac.js";import"./value-equal-17d7769a.js";import"./tiny-invariant-dd7d57d2.js";import"./clsx-1229b3e0.js";import"./index-4749bbbd.js";import"./react-dom-3bfafca0.js";import"./scheduler-765c72db.js";import"./react-redux-5bfe471e.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./use-sync-external-store-b588041f.js";import"./wagmi-a971f881.js";import"./@tanstack-45f509e5.js";import"./@wagmi-21bd2ff5.js";import"./zustand-96774db3.js";import"./viem-a9891897.js";import"./@noble-904ea724.js";import"./eventemitter3-951c0ce8.js";import"./@reduxjs-5da8789b.js";import"./immer-41fd5235.js";import"./redux-4e8b28bc.js";import"./redux-thunk-ef899f4c.js";import"./axios-4a70c6fc.js";import"./i18next-81de2c97.js";import"./i18next-browser-languagedetector-057d838e.js";import"./mini-create-react-context-6807ee74.js";import"./prop-types-19d89cee.js";import"./path-to-regexp-e4bf7bdb.js";import"./isarray-7a86238f.js";const ke=()=>{var p,f,g,x,h;const{t:s}=W(),b=D(),w=z.parse(b.search);let{ref:m,receiveId:o}=w;o||(o=m);const j=H(),{register:i,handleSubmit:N,watch:v,formState:{errors:l}}=C({defaultValues:{ref:m,receiveId:o}}),[t,d]=c.useState(!1),[q,L]=c.useState(!0),I=async r=>{d(!0);const{userId:n,email:P,password:A,ref:S,receiveId:k,walletAddress:E}=r;await y.register({userId:n,email:P,password:A,ref:S,receiveId:k,walletAddress:E}).then(a=>{d(!1),u.success(s(a.data.message)),setTimeout(()=>{j.push("/")},2e3)}).catch(a=>{let R=a.response&&a.response.data.message?a.response.data.message:a.message;u.error(s(R)),d(!1)})};return c.useEffect(()=>{(async()=>await y.checkLinkRef({ref:m,receiveId:o}).then(()=>L(!1)).catch(r=>{let n=r.response&&r.response.data.error?r.response.data.error:r.message;u.error(s(n))}))()},[m,o]),e.jsxs(F,{children:[e.jsx($,{}),e.jsx("div",{className:"min-h-screen bg-white",children:!q&&e.jsx("div",{className:"text-gray-900 flex justify-center bg-white",children:e.jsx("div",{className:"max-w-screen-xl m-0 sm:m-10 flex justify-center flex-1",children:e.jsx("div",{className:"w-full p-12",children:e.jsxs("div",{className:"mt-12 flex flex-col items-center",children:[e.jsx("h1",{className:"text-2xl xl:text-3xl font-extrabold",children:s("register")}),e.jsx("div",{className:"w-full flex-1 mt-8",children:e.jsxs("form",{className:"mx-auto max-w-xl",onSubmit:N(I),autoComplete:"off",children:[e.jsx("input",{className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white",type:"text",placeholder:"User Name",...i("userId",{required:s("User ID is required")}),disabled:t}),e.jsx("p",{className:"error-message-text",children:(p=l.userId)==null?void 0:p.message}),e.jsx("input",{className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5",type:"email",placeholder:"Email",...i("email",{required:s("Email is required")}),disabled:t}),e.jsx("p",{className:"error-message-text",children:(f=l.email)==null?void 0:f.message}),e.jsx("input",{className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5",type:"text",placeholder:"Wallet address : Oxbx7...",...i("walletAddress",{required:s("Wallet address is required"),pattern:{value:/^0x[a-fA-F0-9]{40}$/g,message:s("Please enter the correct wallet format")}}),disabled:t}),e.jsx("p",{className:"error-message-text",children:(g=l.walletAddress)==null?void 0:g.message}),e.jsx("input",{className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5",type:"password",placeholder:"Password",...i("password",{required:s("Password is required"),pattern:{value:/^(?=.*?[a-z])(?=.*?[0-9]).{8,}$/,message:s("Password must contain at least 8 characters and a number")}}),disabled:t}),e.jsx("p",{className:"error-message-text",children:(x=l.password)==null?void 0:x.message}),e.jsx("input",{className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5",type:"password",placeholder:"Confirm Password",...i("confirmPassword",{required:s("Confirm password is required"),validate:r=>{if(v("password")!=r)return"Your passwords do no match"},pattern:{value:/^(?=.*?[a-z])(?=.*?[0-9]).{8,}$/,message:s("Password must contain at least 8 characters and a number")}}),disabled:t}),e.jsx("p",{className:"error-message-text",children:(h=l.confirmPassword)==null?void 0:h.message}),e.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center hover:underline gradient text-white font-bold rounded-full my-6 py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out",children:[t&&e.jsx(T,{}),s("confirm")]}),e.jsxs("p",{className:"mt-4 text-gray-600",children:["Already have an account?"," ",e.jsx(U,{to:"/login",className:"text-primary hover:underline",children:"Login"})]})]})})]})})})})})]})};export{ke as default};
